## lorax template file: populate the ramdisk (runtime image)
<%page args="basearch, product"/>

## anaconda package
## installpkg anaconda-core anaconda-tui
## anaconda deps that aren't in the RPM
installpkg tmux
## installpkg firstboot
installpkg iscsi-initiator-utils

## kernel and firmware
installpkg kernel
%if basearch != "s390x":
    installpkg *-firmware
%endif

## arch-specific packages (bootloaders etc.)
%if basearch == "aarch64":
    installpkg grub2-efi grubby
%endif
%if basearch in ("arm", "armhfp"):
    installpkg kernel-lpae kernel-tegra
    installpkg uboot-tools
%endif
%if basearch == "i386":
    installpkg kernel-PAE gpart
%endif
%if basearch in ("i386", "x86_64"):
    installpkg grub2 grub2-tools biosdevname memtest86+ syslinux
    installpkg efibootmgr grub2-efi shim shim-unsigned
%endif
%if basearch in ("ppc", "ppc64"):
    installpkg grub2 grub2-tools yaboot fbset hfsutils kernel-bootwrapper ppc64-utils
%endif
%if basearch == "s390x":
    installpkg lsscsi s390utils-base 
%endif

## yay, plymouth
## installpkg plymouth

## extra dracut modules
installpkg anaconda-dracut dracut-network dracut-config-generic

## redhat-upgrade-dracut handles upgrades on RHEL
## installpkg redhat-upgrade-dracut redhat-upgrade-dracut-plymouth
## log "Looking for extra redhat-upgrade-dracut packages..."
## -installpkg *-redhat-upgrade-dracut

## rpcbind or portmap needed by dracut nfs module
installpkg rpcbind

## required for dracut
installpkg kbd kbd-misc
## required for anaconda-dracut (img-lib etc.)
installpkg tar xz curl

## basic system stuff
installpkg systemd-sysv systemd-units
installpkg rsyslog

## xorg/GUI packages
## %if basearch != "s390x":
## installpkg xorg-x11-drivers xorg-x11-server-Xorg
## %endif
## installpkg xorg-x11-server-utils xorg-x11-xauth
## installpkg dbus-x11 metacity gsettings-desktop-schemas
## installpkg nm-connection-editor
## installpkg at-spi at-spi2-atk pyatspi
## installpkg gnome-python2-gconf
## installpkg gobject-introspection
## installpkg librsvg2
## installpkg polkit-desktop-policy
## installpkg gnome-keyring
## installpkg python-imaging
 
## filesystem tools
installpkg btrfs-progs xfsprogs 
## installpkg python-volume_key volume_key
## installpkg system-storage-manager
installpkg device-mapper-persistent-data
installpkg device-mapper-multipath

## SELinux support
installpkg selinux-policy-targeted audit libsemanage-python

## network tools/servers
installpkg python-ethtool ethtool openssh-server nfs-utils openssh-clients
## installpkg tigervnc-server-minimal
## %if basearch != "s390x":
## installpkg tigervnc-server-module
## %endif
installpkg net-tools

## hardware utilities/libraries
installpkg pciutils
installpkg mt-st 
%if basearch != "s390x":
installpkg hdparm
%endif
installpkg libmlx4 rdma

## translations & language packs
## installpkg yum-langpacks

## fonts & themes
## installpkg bitmap-fangsongti-fonts
## installpkg dejavu-sans-fonts dejavu-sans-mono-fonts
## installpkg kacst-farsi-fonts
## installpkg kacst-qurn-fonts
## installpkg lklug-fonts
## installpkg lohit-*-fonts
## installpkg madan-fonts
## installpkg nhn-nanum-gothic-fonts
## installpkg smc-meera-fonts
## installpkg thai-scalable-waree-fonts
## installpkg vlgothic-fonts
## installpkg wqy-microhei-fonts
## installpkg sil-abyssinica-fonts
## installpkg xorg-x11-fonts-misc
## installpkg gnome-themes-standard gnome-icon-theme-legacy

## branding & logos
## installpkg fedora-gnome-theme

## debugging/bug reporting tools
## installpkg gdb-gdbserver
## installpkg libreport-plugin-bugzilla libreport-plugin-reportuploader

## extra tools not required by anaconda
installpkg vim-minimal strace lsof less eject
installpkg wget bind-utils ftp
## installpkg spice-vdagent
## installpkg gdisk

## yum plugins
## installpkg yum-langpacks

## RHEL packages
## installpkg subscription-manager

## zFrobisher packages
## installpkg libxklavier libxklavier-devel
installpkg lvm2 yum
installpkg zkvm-installer
installpkg NetworkManager util-linux
installpkg mdadm e2fsprogs deltarpm
installpkg python-blivet libselinux-python
## installpkg plymouth

## actually install all the requested packages
run_pkg_transaction
